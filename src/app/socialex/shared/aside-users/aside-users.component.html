<div class="w-aside-users fixed top-header right-0 bottom-0 z-1 bg-bg-primary">
  <div class="h-full w-full flex flex-col gap-4 py-2 md:py-4 lg:py-6">
    <h4 class="text-sm px-2 md:px-4 lg:px-6">Todos los usuarios ({{ filteredUsers().length }})</h4>
    <div class="flex items-center gap-2 px-2 md:px-4">
      @for (btn of btnsOptions; track btn) {
        <button
          type="button"
          class="btn btn-xs"
          [class.btn-primary]="filterBy() === btn"
          (click)="filterBy.set(btn)"
        >
          {{btn | titlecase}}
        </button>
      }
    </div>
    <div class="px-2 md:px-4">
      <label class="input">
        <svg
          class="h-4 opacity-50"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
        >
          <g
            stroke-linejoin="round"
            stroke-linecap="round"
            stroke-width="2.5"
            fill="none"
            stroke="currentColor"
          >
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.3-4.3"></path>
          </g>
        </svg>
        <input
          type="text"
          class="grow"
          placeholder="Search"
          (keyup)="searchQuery.set(txtSearch.value);"
          #txtSearch
        />
      </label>
    </div>
    <div class="overflow-auto scroll-auto" #lenisWrapper>
      <ul class="flex flex-col">
        @for(user of authService.allUsersAndAuthUsers() | filterAsideUsersBy: filterBy() | searchUserBy: debouncedSearch(); track user.id) {
        <li class="flex items-center gap-2 w-full transition-colors hover:bg-zinc-700">
          <a
            [routerLink]="['profile', user.id]"
            class="w-full flex items-center gap-2 p-2 md:px-4 lg:px-6"
            routerLinkActive="bg-gray-700"
          >
            <img
              class="w-8 h-8 aspect-square rounded-full"
              [src]="user.avatar"
              alt="Avatar"
              draggable="false"
            />
            <div class="flex flex-col">
              <span class="text-sm font-semibold">{{ user.name }}</span>
              <span class="text-xs text-gray-500">{{ user.profession }}</span>
            </div>
            <span
              class="w-2 h-2 rounded-full ml-auto"
              [class.bg-green-500]="user.status === 'online'"
              [class.bg-gray-500]="user.status === 'offline'"
            ></span>
          </a>
        </li>
        } @empty {
          <li class="flex items-center">
            <span class="text-gray-500">No hay usuarios</span>
          </li>
        }
      </ul>
    </div>
  </div>
</div>
